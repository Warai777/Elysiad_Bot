<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lore | Elysiad</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
      function setVh() {
          let vh = window.innerHeight * 0.01;
          document.documentElement.style.setProperty('--vh', `${vh}px`);
      }
      window.addEventListener('resize', setVh);
      window.addEventListener('orientationchange', setVh);
      setVh();
    </script>
</head>
<body>
    <!-- MOBILE NAV ONLY (hidden on desktop) -->
    <nav class="mobile-nav">
        <div class="nav-hamburger" id="hamburger">&#9776;</div>
        <div class="nav-title">Elysiad</div>
        <button class="nav-logout" onclick="location.href='{{ url_for('logout') }}'">Logout</button>
    </nav>
    <div class="sidebar-drawer" id="sidebarDrawer">
        <a href="#" id="closeSidebar">&times;</a>
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <a href="{{ url_for('char_sheet', username=current_user.username) }}">Character</a>
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>
    <div class="top-bar">
        <div class="logo">Elysiad</div>
        <div>
            <a href="{{ url_for('dashboard') }}" class="signup-btn">Dashboard</a>
            <a href="{{ url_for('char_sheet', username=current_user.username) }}" class="signup-btn">Character</a>
            <a href="{{ url_for('logout') }}" class="signup-btn logout">Logout</a>
        </div>
    </div>
    <div class="story-fullscreen-panel">
        <div class="story-main-box" style="max-width: 520px;">
            <div class="story-main-title" style="margin-bottom:18px;">Discovered Lore</div>
            <div class="story-content-scroll" style="background:none; box-shadow:none; padding:0; color:#fff;">
                {% if lore %}
                    <ul style="padding-left: 22px;">
                        {% for item in lore %}
                            <li style="margin-bottom:12px;">{{ item }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <div style="color: #bb93ff;">No lore discovered yet.</div>
                {% endif %}
            </div>
        </div>
    </div>
    <img src="{{ url_for('static', filename='elysiad-mascot.png') }}" class="mascot" alt="mascot">

    <!-- SIDEBAR/HAMBURGER JS -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var hamburger = document.getElementById('hamburger');
        var sidebar = document.getElementById('sidebarDrawer');
        var closeSidebar = document.getElementById('closeSidebar');
        var showGlobalEvent = document.getElementById('showGlobalEvent');
        var globalModal = document.getElementById('globalEventModal');
        var closeModal = document.getElementById('closeModal');

        if (hamburger && sidebar) {
            hamburger.onclick = function() { sidebar.classList.add('open'); };
            closeSidebar.onclick = function() { sidebar.classList.remove('open'); };
        }
        if (showGlobalEvent && globalModal && closeModal) {
            showGlobalEvent.onclick = function(e) {
                e.preventDefault();
                sidebar.classList.remove('open');
                globalModal.style.display = "block";
            };
            closeModal.onclick = function() { globalModal.style.display = "none"; };
            globalModal.onclick = function(e) { if(e.target === globalModal) globalModal.style.display = "none"; };
        }
    });
    </script>
</body>
</html>

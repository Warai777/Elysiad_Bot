<!DOCTYPE html>
<html>
<head>
    <title>Elysiad Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #71b7e6, #9b59b6 60%, #e1eec3); min-height: 100vh; }
        .sidebar { background: #222a44; color: #fff; min-height: 100vh; }
        .sidebar a { color: #fff; display: block; padding: 10px; border-radius: 4px; margin-bottom: 4px; text-decoration: none;}
        .sidebar a:hover, .sidebar .active { background: #5f27cd; }
    </style>
    <script>
      // Live countdown and event
      function updateTimer() {
        fetch('/api/timer').then(r => r.json()).then(data => {
          let s = data.seconds;
          let m = Math.floor(s / 60);
          let sec = s % 60;
          document.getElementById("timer").innerText = `${m}:${sec < 10 ? '0' : ''}${sec}`;
          document.getElementById("event").innerText = data.event || "None";
        });
      }
      setInterval(updateTimer, 1000);
      window.onload = updateTimer;
    </script>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-3 sidebar pt-4">
      <h3>Elysiad Characters</h3>
      {% for uid, user in users.items() %}
        <a href="/user/{{uid}}" {% if loop.first %}class="active"{% endif %}>
          {{ user["Name"] or uid }}
        </a>
      {% endfor %}
      <hr>
      <b>Global Event:</b> <span id="event">{{ global_event or 'None' }}</span><br>
      <b>Next Event In:</b> <span id="timer">{{ time_left }}</span>
    </div>
    <div class="col-md-9 p-4">
      <h2>Welcome to Elysiad (Solo Cross-Over Dashboard)</h2>
      <p>Select a character to see stats and story.<br>
      Global events change every hour and affect all solo stories!</p>
    </div>
  </div>
</div>
</body>
</html>
